---
title: Contexts
description: Use contexts as the single source of truth for semantics and behaviors.
---

import DemoCallout from '../../../components/DemoCallout.astro';
import Playground from '../../../components/Playground.astro';

# Contexts

Contexts sit on top of the [`toggle` foundation](/patterns/toggle/) and orchestrate everything a composite pattern needs: ARIA semantics, behavioral wiring, and alias normalization. Attach a single `data-automagica11y-context` attribute to a toggle trigger and the registry keeps the trigger, target, and any aliases in sync.

## How contexts compose with toggle

1. **Start with a toggle.** Every context begins as a [`data-automagica11y-toggle` trigger](/patterns/toggle/#demo) connected to a target surface.
2. **Opt into shared semantics.** Add `data-automagica11y-context="dialog"` (or any alias) and the registry applies the appropriate roles and ARIA attributes.
3. **Layer behaviors on demand.** Context modes decide whether to hydrate focus traps, hover intent, inert locking, and other helpers. Behaviors always piggyback on the same toggle lifecycle events that plugins use.
4. **Compose freely.** Multiple contexts can coexist on a page. They emit namespaced events (`automagica11y:dialog:*`, `automagica11y:tooltip:*`) so plugins and analytics stay coordinated.

<DemoCallout type="success" title="Toggle-first mental model">
  <p>Because contexts reuse toggle internally, everything you learn in the <a href="/patterns/toggle/">Toggle pattern</a> applies here too: truthiness aliases, grouped triggers, and lifecycle events all behave identically.</p>
</DemoCallout>

## Attribute API

| Attribute | Description |
|-----------|-------------|
| `data-automagica11y-context` | Names the context to activate (for example `dialog`, `tooltip`, `menu`). |
| `data-automagica11y-target` | Selector for the managed surface. Defaults to the next sibling or the resolved ID. |
| `data-automagica11y-context-mode` | Controls automation depth. Accepts `all` (default), `semantics-only`, or `behaviors-only`. |
| `data-automagica11y-context-alias` | Override the alias mapping for bespoke vocabulary. |

### Modes

- `all` – semantics + behaviors (default).
- `semantics-only` – apply ARIA/role defaults only; wire your own behaviors.
- `behaviors-only` – reuse dismissal, focus traps, and state syncing without altering existing semantics.

## Capability matrix

| Context | Semantics | Behaviors | Examples | Pattern docs |
|---------|-----------|-----------|----------|--------------|
| `dialog` | `role="dialog"`, `aria-modal`, trigger linking | Focus trap, inert siblings, Escape to close, restore focus | [Context dialog](/examples/context-dialog/) | [Dialog pattern](/patterns/dialog/) |
| `tooltip` | `role="tooltip"`, `aria-describedby` wiring | Hover intent, long-press, anchor follow | [Context tooltip](/examples/context-tooltip/) | [Tooltip pattern](/patterns/tooltip/) |
| `menu` | `role="menu"` scaffolding | _Behaviors planned_ (roving tabindex, typeahead) | _Roadmap_ | [Toggle pattern](/patterns/toggle/) |
| `accordion` | `role="region"` scaffolding | _Behaviors planned_ | _Roadmap_ | [Toggle pattern](/patterns/toggle/) |
| `disclosure` | `role="region"` scaffolding | _Behaviors planned_ | _Roadmap_ | [Toggle pattern](/patterns/toggle/) |
| `listbox` | `role="listbox"` scaffolding | _Behaviors planned_ | _Roadmap_ | [Toggle pattern](/patterns/toggle/) |
| `tablist` | `role="tablist"` scaffolding | _Behaviors planned_ | _Roadmap_ | [Toggle pattern](/patterns/toggle/) |
| `tree` | `role="tree"` scaffolding | _Behaviors planned_ | _Roadmap_ | [Toggle pattern](/patterns/toggle/) |

Use the matrix to decide whether a context already automates the behaviors you need or whether you should augment it with plugins today. The [`@core/context/registry.ts`](/reference/core/#contexts-corecontext) reference page lists the same capabilities at the source level.

## Alias map

| Alias | Canonical context |
|-------|-------------------|
| `dropdown`, `kebab`, `meatball` | `menu` |
| `modal`, `dialog`, `sheet` | `dialog` |
| `details`, `expander`, `disclosure` | `toggle` |
| `tooltip`, `hint`, `label` | `tooltip` |

Aliases keep older attribute names and regional terminology working while still running through the same context pipeline.

## Examples & recipes

- [Dialog quickstart](/getting-started/quickstart/) – builds a dialog with context mode `all`.
- [Context dialog example](/examples/context-dialog/) – focus trap, inert siblings, Escape dismissal.
- [Context tooltip example](/examples/context-tooltip/) – hover, focus, and long-press interactions.
- [Truthiness aliases guide](/guides/truthiness/) – shows how contexts share the same vocabulary.

## Alias parity demos

The legacy `data-automagica11y-dialog` attribute maps directly to the dialog context.

<Playground id="contexts-dialog" heading="Context vs. alias" description="Two ways to activate the same dialog wiring.">
  <div slot="demo">
    <div class="docs-contexts-guide__grid">
      <button data-automagica11y-context="dialog" data-automagica11y-target="#context-dialog">Open via context</button>
      <button data-automagica11y-dialog="#alias-dialog">Open via alias</button>
    </div>

    <div id="context-dialog" role="dialog" aria-labelledby="context-dialog-title" hidden>
      <h2 id="context-dialog-title">Context dialog</h2>
      <p>Focus trapping, inert background, and Escape dismissal are included.</p>
      <button data-automagica11y-dialog-close>Close</button>
    </div>

    <div id="alias-dialog" role="dialog" aria-labelledby="alias-dialog-title" hidden>
      <h2 id="alias-dialog-title">Alias dialog</h2>
      <p>The alias uses the same context internally, guaranteeing parity.</p>
      <button data-automagica11y-dialog-close>Close</button>
    </div>
  </div>
  <div slot="code">
{`<button data-automagica11y-context="dialog" data-automagica11y-target="#context-dialog">Open via context</button>
<button data-automagica11y-dialog="#alias-dialog">Open via alias</button>`}
  </div>
</Playground>

Tooltips share the same alias wiring.

<Playground id="contexts-tooltip" heading="Context vs. tooltip alias" description="Context and alias both hydrate tooltip behavior.">
  <div slot="demo">
    <div class="docs-contexts-guide__grid">
      <button data-automagica11y-context="tooltip" data-automagica11y-target="#context-tooltip">
        Hover or focus me
      </button>
      <button data-automagica11y-tooltip="#alias-tooltip">Alias trigger</button>
    </div>

    <span id="context-tooltip" role="tooltip" hidden>Context-powered tooltip.</span>
    <span id="alias-tooltip" role="tooltip" hidden>Alias-powered tooltip.</span>
  </div>
  <div slot="code">
{`<button data-automagica11y-context="tooltip" data-automagica11y-target="#context-tooltip">Hover me</button>
<button data-automagica11y-tooltip="#alias-tooltip">Alias trigger</button>`}
  </div>
</Playground>

## Roadmap

The context registry evolves alongside the core patterns. Track progress in the [Examples roadmap](/examples/coverage-plan/) and the [Core reference](/reference/core/):

- **Menu context behaviors** – roving tabindex, typeahead search, and dismissible submenus.
- **Accordion & disclosure parity** – share toggle grouping logic, add `aria-disabled` and single-open coordination.
- **Listbox, tablist, and tree** – mirror WAI-ARIA Authoring Practices with arrow key navigation and typeahead.
- **Context capability lab** – interactive demo that lets you toggle focus trap, inert siblings, hover intent, and anchor follow helpers individually.

As each milestone lands, the matrix above and the associated pattern pages will note the new capabilities.

## Continue exploring

- Dive into the [Dialog pattern](/patterns/dialog/) and [Tooltip pattern](/patterns/tooltip/) for behavior deep dives.
- Pair contexts with plugins like [Announce](/plugins/announce/) to broadcast state changes to screen readers.
- Explore imperative helpers in [`@core/context/helpers`](/reference/core/#contexts-corecontext) when you need bespoke orchestration.
